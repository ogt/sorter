{
  "name": "webcommand",
  "description": "Utility that exposes unix commands as web services",
  "version": "1.0.6",
  "repository": {
    "url": "git://github.com/ogt/webcommand.git"
  },
  "main": "webcommand.js",
  "scripts": {
    "test": "make test"
  },
  "dependencies": {
    "event-stream": "~3.0.15"
  },
  "devDependencies": {
    "tap": "~0.4.3",
    "jshint": "~2.1.4"
  },
  "readme": "Unix command line utilities as web services\n==\n[![Build Status](https://travis-ci.org/MauritsMeijer/webcommand.png)](https://travis-ci.org/MauritsMeijer/webcommand)\n\n## Synopsis\n\nThis module provides functions that allow the exposure of any unix command utility to node.js mapping the commands stdin and stdout to the webserver in out and the url's path to the uitilities arguments.\nThere are two functions  `webCommand` and `getCommandList`. \n\n#Description\nTo use this module, you need to first\n```\nvar webcommand = require('webcommand')([commandList]);\n```\n\nThe webcommand creates spawns a separate process, pipe-ing the input and output  streams as needed. It also accepts \na ctrlStream to emit errors and signal the end of the command.\nCommand is sth that can be exec-ed so it has to be found in the current process's path\nArguments is the list of arguments that we are passing to the process.\n```\nwebcommand.webCommand(command,arguments, inStream, outStream, ctrlStream);\n```\n\nTo get the list of allowed commands for a CommandServer.\n```\nwebcommand.getCommandList()\n```\nThe 'normal' use case for this library is to expose the power of the unix command utilities within a more restricted enviorment, for example the browser. For example you can easily create an awk javascript function (replace sort above with awk..). Note that while these unix facilities are obtaining significant user access (even readonly) to the server, the server would probably be a rooted slug - e.g. a heroku app - whose disk is containing no user information besides the code it serves.\n\n#Example with express\nIn this example a post of a form in index.html will call sort and stream the results back to browser.\n\n```\nvar express = require('express'),\n    webCommand = require('../')(),\n    stream = require('event-stream');\n\nvar port = process.env.PORT || 8000;\nvar app = express();\n\napp.get('/getCommands', function(req,res) {\n      res.send(JSON.stringify(webCommand.getCommandList()));\n    });\n\napp.get('/', function(req,res) {\n      res.sendfile('example.html');\n    });\n\napp.post('/*', function(req,res){\n    var cmd = req.path.replace('/','');\n        args = [].concat(req.query.args);\n        cStream= stream.through();\n    if (req.query.args === '') args = null;\n\n    cStream.on('error', function(err) {\n        console.error(err);\n    });\n    webCommand.webCommand(cmd,args, req, res, cStream);\n\n});\n```\n\n## Installation \n\nTo run locally the example:\n\n    > hub clone ogt/webcommand && cd webcommand\n    > npm install\n    > make test\n    > node example/example.js&\n    > open localhost:8000/getCommands &\n    > open localhost:8000 \n\nYou can test the default command (sort) or replace any command that is in your path. Remember that if if you are to use a command that doesn't need stdin you will need to clear the input textarea - otherwise you will get a pipe error.\n\n",
  "readmeFilename": "README.md",
  "_id": "webcommand@1.0.6",
  "_from": "webcommand@~1.0.6"
}
